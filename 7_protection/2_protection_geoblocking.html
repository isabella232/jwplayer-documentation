<!-- 

THIS WILL LIVE AT: 
http://support.jwplayer.com/customer/en/portal/articles/1995777
("Geoblocking with the Platform API") 

FOR REVIEW BY: Allison 

TITLE: "Geo-Blocking with JW Player" 

KEYWORDS: geoblocking, content protection, jw platform, jwAdvancedSetup, EntArticle

<title>Geo-Blocking Settings for API and Dashboard</title>

-->


<p>The JW Player dashboard now has a feature to set geo-blocking by
country. Users can set a list of either allowed or restricted countries
for the entire property. When content or players are requested from
countries that do not meet the geo-blocking criteria, that content will
not be served to the end user.<br>
</p>

<h2>Geo-Blocking by Country / Region<br>
</h2>

<br>
<p>Users can enable Geo-blocking for the account (per property if you
have multiple properties set up) within the Account &gt; Properties
section settings.&nbsp; At this time, geo-blocking is not configurable
for a specific player or specific content.&nbsp; <br>
</p><h2>Types of Restrictions<br>
</h2>

<p>The default for geo-blocking is OFF.</p>
<p>To <span style="font-weight: bold;">allow </span>only a certain list
of regions, set Geo-Blocking to "Allowed List" and add regions to your
allowed list.&nbsp; Requests from the allowed regions will be returned
content. <br>
</p>
<p>To <span style="font-weight: bold;">block </span>only a certain list
of regions, set Geo-Blocking to "Blocked List" and add regions to your
blocked list.&nbsp; Requests from blocked regions will be returned at
403 response and will not be able to view your content. <br>
</p>
<p>Note: at this time you may configure <span style="font-weight: bold;">either</span> an allowed list or a blocked list.&nbsp; These options are mutually exclusive.&nbsp; <br>
</p>
<p><img src="//support-static.jwplayer.com/images/protection/geo-blocking-dashboard.png" alt="Geo-Blocking Dashboard Settings"/></p>

<p>To achieve geo-blocking via the <strong>JW Platform API</strong>, see the <a href="http://developer.jwplayer.com/jw-platform/reference/v1/methods/accounts/protectionrules/index.html">JW Platform API Reference</a> in our Developer Portal.</p>

<!-- 
<p>The JW Player dashboard now has a feature to set geo-blocking by
country. Users can set a list of either allowed or restricted countries
for the entire property. When content or players are requested from
countries that do not meet the geo-blocking criteria, that content will
not be served to the end user.<br>
</p>
<h2>Geo-Blocking in the Dashboard</h2>
<h3>Geo-Blocking by Country / Region</h3>
<p>Users can enable Geo-blocking for the account (per property if you
have multiple properties set up) within the Account &gt; Properties
section settings.&nbsp; At this time, geo-blocking is not configurable
for a specific player or specific content. </p>
<h3>Types of Restrictions</h3>

<p>The default for geo-blocking is OFF.</p>
<p>To <span style="font-weight: bold;">allow </span>only a certain list
of regions, set Geo-Blocking to "Allowed List" and add regions to your
allowed list. Requests from the allowed regions will be returned
content. <br>
</p>
<p>To <strong>block</strong> only a certain list
of regions, set Geo-Blocking to "Blocked List" and add regions to your
blocked list. Requests from blocked regions will be returned at
403 response and will not be able to view your content.</p>
<p>Note: at this time you may configure <strong>either</strong> an allowed list or a blocked list. These options are mutually exclusive.</p>
<p>&nbsp;</p>
<hr>
<p>&nbsp;</p>
<h2>Geo-Blocking In the API</h2>

<p>Using the Platform API, developers can set a list of either allowed or restricted countries. When content or players are requested from countries that do not meet the geo-blocking criteria, that content will not be served and content.jwplatform.com will return a 403 response.</p>

<h3>Getting Started With the API</h3>

<p>At this time, setting protection rules is only available via the API. This functionality will be added to the account portal website in the near future. If you are unfamiliar&nbsp;with how to use the API kits, please see the <a href="http://support.jwplayer.com/customer/portal/articles/1489902-jw-platform-api-reference">Platform API Reference</a> support document.<br />
&nbsp;</p>

<h3>URL Scheme</h3>

<p>Geo-blocking is done by creating or updating your account&#39;s rules at&nbsp;<a href="http://developer.jwplayer.com/jw-platform/reference/v1/methods/accounts/protectionrules/index.html">/accounts/protectionrules</a>&nbsp;<span style="line-height: 1.6;">The parameters of interest are:</span></p>
<br />
<strong>geo_rule_type</strong> which can be set to:

<ul>
	<li>&#39;none&#39; meaning no geo-blocking is done</li>
	<li>&#39;whitelist&#39; meaning only requests from the specified list of countries should be returned content</li>
	<li>&#39;blacklist&#39; meaning only requests from the specified list of countries should be returned a 403 response</li>
</ul>
<strong>geo_countries_list</strong> which is a comma separated list of 2 letter country codes specified by <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2</a>

<ul>
	<li>example: &#39;CA,US,MX&#39; includes North American countries.</li>
</ul>
&nbsp;

<h3>Creating or updating your geo-blocking rules</h3>
Here is an example python script that works with the python API kit to update an account&#39;s protection rules to only allow users from Canada, the United States and Mexico. Note that at this time an account is only allowed to have, at most, one protection rule set. Once created, the rule needs to be referenced by protectionrule_key for updating

<pre>
?import pprint
import time

from botr.api import API

pp = pprint.PrettyPrinter()

# Please update kkkk with your key and ssss with your secret
api = API(&#39;kkkk&#39;, &#39;ssss&#39;)
params = dict(
&nbsp; &nbsp; geo_rule_type = &#39;whitelist&#39;, # whitelist | blacklist | none
&nbsp; &nbsp; geo_country_list = &#39;CA,US,MX&#39; # comma separated list of two-letter country codes
)
pp.pprint(&quot;initial list of protectionrules&quot;)
list_response = api.call(&#39;/accounts/protectionrules/list&#39;)
pp.pprint(list_response)


if (len(list_response.get(&#39;protectionrules&#39;)) == 0): # if a protectionrule doesn&#39;t exist, create one
&nbsp; &nbsp; pp.pprint(&quot;creating a new protection rule&quot;)
&nbsp; &nbsp; response = api.call(&#39;/accounts/protectionrules/create&#39;,params=params)
&nbsp; &nbsp; pp.pprint(response)
else: # if a protectionrule does exist, update it
&nbsp; &nbsp; params_with_key = dict(
&nbsp; &nbsp; &nbsp; &nbsp; geo_rule_type = params.get(&#39;geo_rule_type&#39;),
&nbsp; &nbsp; &nbsp; &nbsp; geo_country_list = params.get(&#39;geo_country_list&#39;),
&nbsp; &nbsp; &nbsp; &nbsp; protectionrule_key = list_response.get(&#39;protectionrules&#39;)[0].get(&#39;key&#39;)
&nbsp; &nbsp; )
&nbsp; &nbsp; pp.pprint(&quot;updating existing protection rule&quot;)
&nbsp; &nbsp; response = api.call(&#39;/accounts/protectionrules/update&#39;,params=params_with_key)
&nbsp; &nbsp; pp.pprint(response)

pp.pprint(&quot;listing protectionrules again after create or update&quot;)
list_response = api.call(&#39;/accounts/protectionrules/list&#39;)
pp.pprint(list_response)</pre>
-->