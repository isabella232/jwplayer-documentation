
<!-- 
FOR REVIEW BY: Eric Boyd 

TITLE: "Ad Tag Targeting Macros"

KEYWORDS: jw ads, ads, advertising, ad tag macros, ad tag targeting, macro, AdsArticle


WHEN FINISHED, this will be located at "http://support.jwplayer.com/customer/en/portal/articles/1434340 (updating previous "Ad Tag Targeting Macros" at the same URL) 

--> 


<!DOCTYPE html>
<html>
<head>
    <title></title>

<script src="//content.jwplatform.com/libraries/XeGdlzmk.js"></script>

<meta name="deskURL" content="https://jwplayer.desk.com/admin/content-management/articles/1434340-ad-tag-variables/edit?select_filter=605644">
</head>

<body>
<div class="article_callout">This document applies to users of <strong>JW Player Ads</strong>. Don&#39;t have <a href="http://www.jwplayer.com/products/jwplayer-ads/" target="_blank">Ads</a>? &nbsp;<a href="http://www.jwplayer.com/pricing/">Upgrade Now</a>.</div>

<p>Many VAST servers use &quot;tag variables&quot;&nbsp;to optimize fill and provide more information on how ads are being viewed. JW Player supports a number of variables that can be added to your VAST tag URL.&nbsp;Once an ad call is made by JW&nbsp;Player, the&nbsp;variables will be replaced accordingly.<br />
&nbsp;</p>

<h3>Supported Ad Tag Variables in VAST</h3>

<dl>
	<dt><strong>__companion-div__</strong></dt>
	<dd>The ID of the companion div, for example to allow VPAID ads to talk to companions.</dd>
	<dt><strong>__domain__</strong></dt>
	<dd>The domain name the player is embedded on.</dd>
	<dt><strong>__player-height__</strong></dt>
	<dd>The height of the video player on the page in pixels.</dd>
	<dt><strong>__player-width__</strong></dt>
	<dd>The width of the video player on the page in pixels.</dd>
	<dt><strong>__random-number__</strong></dt>
	<dd>Typically used as a cache-buster, to ensure there is no local caching of the VAST response.</dd>
	<dt><strong>__page-url__</strong></dt>
	<dd>The URL of the current page (the one the video is embedded in).</dd>
	<dt><strong>__timestamp__</strong></dt>
	<dd>The current time of the user&#39;s computer, as a UNIX timestamp.</dd>
	<dt><strong>__referrer__</strong></dt>
	<dd>The URL of the page that brought the viewer to the current player.</dd>
</dl>

<div id="playlist">&nbsp;</div>

<h3>Playlist Item Properties</h3>

<p>Playlist item properties allow publishers to send <strong>any</strong> metadata from the <a href="http://support.jwplayer.com/customer/portal/articles/1413113-configuration-options-reference#playlist" target="_blank">JW Player Playlist</a> to an&nbsp;ad server. Assuming that you had something entered in your playlist XML like:</p>

<pre>
&lt;jwplayer:artist&gt;Leonardo&lt;/jwplayer:artist&gt;</pre>

<p>You would then be able to use the <strong>__item-artist__</strong> variable in your ad tag. When making a call to an ad server, we will automatically fill this in as <strong>Leonardo</strong>. This is helpful to target ads to metadata keywords or to target different ads to each item in a playlist. Here are a few more example properties:</p>

<ul>
	<li><strong>__item-title__</strong>: the title of the currently playing video.<sup>1</sup></li>
	<li><strong>__item-description__</strong>: the short description of the currently playing video.<sup>1</sup></li>
	<li><strong>__item-mediaid__</strong>: the custom media id of the currently playing video.<sup>1</sup></li>
	<li><strong>__item-file__</strong>: the file URL of the currently playing video.</li>
	<li><strong>__item-duration__</strong>: the duration in seconds of the currently playing video. (Only works with midroll and postroll ads)</li>
</ul>

<p><span style="font-size:10px;"><sup>1</sup>Must be specified inside of the playlist.</span></p>

<h3>Example</h3>

<p>Here is an example VAST tag with the <strong><em>__random-number__</em></strong> variable being used. Please note that this is how a tag should appear when setting it within the player embed:</p>

<pre>
//adserver.com/vastResponse.xml?cb=__random-number__</pre>

<p>Once the ad tag is called from the JW Player, we will see which variables are being used, and populate these variables appropriately. In this instance, the above tag will make a call to the ad server as:</p>

<pre>
//adserver.com/vastResponse.xml?cb=98475983745983752</pre>

<p><strong>Note:</strong> Ad tag variables are replaced with an empty string if they cannot be filled.</p>

<p>See <a href="http://support.jwplayer.com/customer/portal/articles/1431665-basic-preroll-video-ads" target="_blank">Basic Preroll Ads</a> to learn how to setup ad tags in JW Player.</p>

<h2>Google IMA</h2>

<p>For IMA, all tag variables produced by the DFP server are supported. See the <a href="https://developers.google.com/interactive-media-ads/">IMA SDK Documentation</a> for more info.</p>

</body>
</html>