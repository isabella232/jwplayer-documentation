


<p>This article explains how to use the <a href="http://www.jwplayer.com/products/jwplayer/javascript/" target="_blank">JavaScript API</a> component of JW Player 7. This API can be used to enhance the functionality of your video embeds and/or to implement rich video-page interactions. It abstracts any differences between Flash and HTML5, so the code you write will work with both technologies.</p>

<div class="article_callout"><strong>Note:</strong> We strongly suggest that <strong>all</strong> API calls be made after the player is considered <strong>ready</strong>.</div>

<p><strong>The JW Player 7&#39;s API has greatly changed since JW 6. In this guide, there are some updates regarding best practices, as well as configuration of our new event handling. If you are looking for JW 6&#39;s Javascript API documents, please see our <a href="http://support.jwplayer.com/customer/portal/articles/2051720-javascript-api-reference-legacy">Legacy API Guide.</a></strong></p>

<h2>API Best Practices with JW Player 7</h2>

<p>We encourage developers to stop using the jwplayer() syntax, and instead keep a reference to the player instance. Based on how JW Player 7 is engineered, this will actually save a few ms of time during player setup. For example:</p>

<pre>
var playerInstance = jwplayer(&#39;container&#39;);
//jwplayer(&#39;container&#39;).pause(); // BAD! :(
playerInstance.pause(); // Good :)
</pre>

<p>Because of this update, all subsequent references to the player&#39;s API in our articles will assume that there is a variable called <strong>playerInstance</strong> which refers to your player instance.</p>

<h2>JW7 API Event Handling</h2>

<p>JW Player&#39;s <strong>Events</strong>, which previously always included an <strong>on</strong> prefix, are now four separate methods based on <a href="http://backbonejs.org/#Events">Backbone.Events</a>. This allows a player instance to be used as an event router and gives developers better options and control.</p>
Currently, JW Player events support:

<p>&nbsp;</p>

<dl>
	<dt><strong>on(<em>&#39;event&#39;</em>)</strong></dt>
	<dd>Behaves similarly to JW6&#39;s <strong>on___()</strong> handling. Will continually listen for an event.
	<pre>
playerInstance.on(event, [callback], [context])
</pre>
	</dd>
	<dt><strong>off(<em>&#39;event&#39;</em>)</strong></dt>
	<dd>Allows a developer to toggle an <strong>on</strong> event listener to <strong>off</strong>.
	<pre>
playerInstance.off(event, [callback], [context])</pre>
	</dd>
	<dt><strong>once(<em>&#39;event&#39;</em>)</strong></dt>
	<dd>Behaves similarly to <strong>on</strong>, however will only trigger once, until it is set up again.
	<pre>
playerInstance.once(event, [callback], [context])
</pre>
	</dd>
	<dt><strong>trigger(<em>&#39;event&#39;</em>)</strong></dt>
	<dd>Capable of firing events to a listener. This replaces <strong>dispatchEvent</strong>.
	<pre>
playerInstance.trigger(event, [*args])</pre>
	</dd>
</dl>

<p>A quick example of old syntax vs new syntax can be seen below:</p>

<dl>
	<dd>Old JW6 Syntax:
	<pre>
playerInstance.onVolume(function(event){
console.log(&quot;Volume Changed&quot;);
});
	</pre>
	</dd>
	<dd>New JW7 Syntax:
	<pre>
playerInstance.on(&#39;volume&#39;, function(event){
console.log(&quot;Volume Changed&quot;);
});
	</pre>
	</dd>
</dl>

<h2>JW7 Event Handling Example</h2>

<p>The below event triggers every time a volume change is initiated. As a result, Javascript will fire an alert dictating what the volume has been changed to.</p>

<pre>
playerInstance.on(&#39;volume&#39;, function(e) {
alert(&quot;Volume is changed to: &quot;+ e.volume);
});
</pre>

<h2>Deprecated JW Player API Calls</h2>

<ul>
	<li><strong>dispatchEvent</strong> should no longer be used. It is replaced by <strong>trigger</strong></li>
	<li><strong>removeEventListener</strong> should no longer be used. It is replaced by <strong>off</strong></li>
	<li><strong>config</strong> will no longer work.</li>
</ul>

<h2>Getting Started</h2>

<p>Before it is possible to interact with a player, a player setup is required. Our <a href="/customer/portal/topics/601065-embedding/articles">Embedding Section</a> contains several examples. In accordance to our JW7 best practices, here is a basic player embed:</p>

<pre>
&lt;div id=&#39;myElement&#39;&gt;Loading the player ...&lt;/div&gt;
&lt;script type=&#39;text/javascript&#39;&gt;
var playerInstance = jwplayer(&#39;myElement&#39;);
  playerInstance.setup({ 
    file: &#39;/uploads/example.mp4&#39;, 
    image: &#39;/uploads/example.jpg&#39;
  });
&lt;/script&gt;
</pre>

<p>Once the player completes its setup, API calls can immediately be made. If you have one player on your page, it can always be accessed using the <strong>playerInstance</strong> reference function. For example:</p>

<pre>
  &lt;a onclick=&#39;playerInstance.play()&#39;&gt;Toggle playback&lt;/a&gt;
  &lt;a onclick=&#39;alert(playerInstance.getVolume())&#39;&gt;Report volume&lt;/a&gt;
</pre>

<p>Here is the combination of setup code and API links in action:</p>

<div id="container">&nbsp;</div>
<script type="text/javascript">
var playerInstance = jwplayer("container");
playerInstance.setup({
    file: '//content.jwplatform.com/videos/C4lp6Dtd-640.mp4',
    image: '/customer/portal/attachments/268150'
});
</script>

<p><a href="#" onclick="playerInstance.play(); return false;">Toggle playback</a> | <a href="#" onclick="alert(playerInstance.getVolume()); return false;">Report volume</a></p>

<h2>Multiple Players</h2>

<p>When you have multiple players on a page, you must be specific about which player you want to interact with. In that case, there are two ways to select a player:</p>

<ul>
	<li>With the id of the element you instantiated the player over:
	<pre>
var firstInstance = jwplayer();
firstInstance.play();
</pre>
	</li>
	<li>With the index in the list of players on the page (Top to bottom, starting with 0):
	<pre>
var secondInstance = jwplayer(1);
secondInstance.play();</pre>

	<p>Note the selector <strong>jwplayer(0)</strong> is actually the same as <strong>jwplayer()</strong>.</p>
	</li>
</ul>

<h2>Setter and Getter API Calls</h2>

<p>Now that we&#39;ve explored the updated JW Player 7 event model, it&#39;s time to venture into <strong>getting</strong> and <strong>setting</strong> your player&#39;s configuration options. These API calls largely remain the same from JW6.</p>

<ul>
	<li><strong>Getter - </strong>Provides a way to retrieve variables and information from the player. For example:

	<pre>
playerInstance.getVolume();
</pre>
	will return the player&#39;s current volume.</li>
	<br />
	<li><strong>Setter - </strong>Refers to a way to <strong>set</strong> a player value. This can be similar to setting your player&#39;s volume, changing the player&#39;s dimensions, or controlling playback. For example:
	<pre>
playerInstance.setVolume(80);
</pre>
	will set your player&#39;s volume to 80.</li>
</ul>

<h2>Cheat Sheet</h2>

<p>The table below act as a cheat sheet of all API calls. The separate <a href="/customer/portal/articles/1413089-javascript-api-reference">JavaScript API Reference</a> guide contains an listing of all parameters for all API calls. Click on the name of a class in the table to jump to the corresponding section in the API Reference. Also, for the sake of simplicity, we are only referencing <strong>on</strong> events here. As mentioned above, these can also utilize <strong>off</strong>, <strong>once</strong>, and <strong>trigger</strong>.</p>

<table>
	<tbody>
		<tr>
			<th>Class</th>
			<th>Getters</th>
			<th>Setters</th>
			<th>Events</th>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#setup">Setup</a></td>
			<td>getRenderingMode</td>
			<td>setup<br />
			remove</td>
			<td>on(&#39;ready&#39;)<br />
			on(&#39;setupError&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#playlist">Playlist</a></td>
			<td>getPlaylist<br />
			getPlaylistIndex<br />
			getPlaylistItem</td>
			<td>load<br />
			playlistItem</td>
			<td>on(&#39;playlist&#39;)<br />
			on(&#39;playlistItem&#39;)<br />
			on(&#39;playlistComplete&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#buffer">Buffer</a></td>
			<td>getBuffer</td>
			<td>&nbsp;</td>
			<td>on(&#39;bufferChange&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#playback">Playback</a></td>
			<td>getState</td>
			<td>play<br />
			pause<br />
			stop</td>
			<td>on(&#39;play&#39;)<br />
			on(&#39;pause&#39;)<br />
			on(&#39;buffer&#39;)<br />
			on(&#39;idle&#39;)<br />
			on(&#39;complete&#39;)<br />
			on(&#39;error&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#seek">Seek</a></td>
			<td>getPosition<br />
			getDuration</td>
			<td>seek</td>
			<td>on(&#39;seek&#39;)<br />
			on(&#39;seeked&#39;)<br />
			on(&#39;time&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#volume">Volume</a></td>
			<td>getMute<br />
			getVolume</td>
			<td>setMute<br />
			setVolume</td>
			<td>on(&#39;mute&#39;)<br />
			on(&#39;volume&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#resize">Resize</a></td>
			<td>getWidth<br />
			getHeight<br />
			getFullscreen</td>
			<td>resize</td>
			<td>on(&#39;fullscreen&#39;)<br />
			on(&#39;resize&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#quality">Quality</a></td>
			<td>getQualityLevels<br />
			getCurrentQuality</td>
			<td>setCurrentQuality</td>
			<td>on(&#39;levels&#39;)<br />
			on(&#39;levelsChanged&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#captions">Captions</a></td>
			<td>getCaptionsList<br />
			getCurrentCaptions</td>
			<td>setCurrentCaptions</td>
			<td>on(&#39;captionsList&#39;)<br />
			on(&#39;captionsChange&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#controls">Controls</a></td>
			<td>getControls<br />
			getSafeRegion</td>
			<td>addButton<br />
			removeButton<br />
			setControls</td>
			<td>on(&#39;controls&#39;)<br />
			on(&#39;displayClick&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#advertising">Advertising</a></td>
			<td>&nbsp;</td>
			<td>playAd</td>
			<td>on(&#39;adClick&#39;)<br />
			on(&#39;adCompanions&#39;)<br />
			on(&#39;adComplete&#39;)<br />
			on(&#39;adError&#39;)<br />
			on(&#39;adImpression&#39;)<br />
			on(&#39;adTime&#39;)<br />
			on(&#39;adSkipped&#39;)<br />
			on(&#39;beforePlay&#39;)<br />
			on(&#39;beforeComplete&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1413089-javascript-api-reference#metadata">Metadata</a></td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>on(&#39;meta&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/portal/articles/1409823-social-sharing-overlay">Sharing</a></td>
			<td>&nbsp;</td>
			<td>playerInstance.getPlugin(&#39;sharing&#39;).open()<br />
			playerInstance.getPlugin(&#39;sharing&#39;).close()</td>
			<td>playerInstance.getPlugin(&#39;sharing&#39;).on(&#39;open&#39;)<br />
			playerInstance.getPlugin(&#39;sharing&#39;).on(&#39;close&#39;)<br />
			playerInstance.getPlugin(&#39;sharing&#39;).on(&#39;click&#39;)</td>
		</tr>
		<tr>
			<td><a href="/customer/en/portal/articles/1409745-display-related-videos">Related</a></td>
			<td>&nbsp;</td>
			<td>playerInstance.getPlugin(&#39;related&#39;).open()<br />
			playerInstance.getPlugin(&#39;related&#39;).close()</td>
			<td>playerInstance.getPlugin(&#39;related&#39;).on(&#39;open&#39;)<br />
			playerInstance.getPlugin(&#39;related&#39;).on(&#39;close&#39;)<br />
			playerInstance.getPlugin(&#39;related&#39;).on(&#39;play&#39;)</td>
		</tr>
	</tbody>
</table>
