<div class="panel" align="center" style="text-align:center; padding: 20px 0px;"><span style="font-size:18px;"><strong>This page has moved</strong> to our new developer site!&nbsp; Please visit the updated location <a href="https://developer.jwplayer.com/jw-platform/docs/developer-guide/embed_players/" id="301url">here</a>.</span> 
<p>Thanks for your patience while we update our documentation. </p>
</div>
<p style="text-align:center;">You will be automatically redirected in <strong id="301eta">10</strong> seconds.</p>
<script>
	setInterval(function(){
		var eta = document.getElementById("301eta");
		var cnt = Number(eta.innerHTML);
		if(cnt > 1) {
			eta.innerHTML = (cnt-1).toString();
		} else { 
			document.location.href = 
			    document.getElementById("301url").href;
		}
	},1000);
</script>
<p>&nbsp;</p>
<hr>
<p>&nbsp;</p>

<p>When building JW Platform into your own website or CMS, one of the most important functionalities is the generation of player embed codes for programmatic publishing.</p>

<div class="article_warning">To ensure fair access for all, usage of api.jwplatform.com is limited to <strong>10 calls per minute.</strong> We reserve the right to block API access to accounts that exceed this rate. This limit does not apply to content.jwplatform.com</div>

<div class="article_callout">This document applies to users of <strong>JW Platform</strong>. Don&#39;t have Hosting? <a href="http://www.jwplayer.com/pricing/">Upgrade Now</a>.</div>

<h2>Introduction</h2>

<p>Let&#39;s look at the typical player embed code:</p>

<pre>
&lt;script type=&quot;text/javascript&quot; src=&quot;http://content.jwplatform.com/players/nPripu9l-ALJ3XQCI.js&quot;&gt;&lt;/script&gt;</pre>

<p>The URL of the player itself is what&#39;s most interesting here; the wrapping JavaScript tag is always the same. It consists of five parts:</p>

<ul>
	<li>The contentserver root. This is usually <em>content.jwplatform.com</em>, but it is another domain if you use <a href="/customer/portal/articles/1433702-dns-masking-the-jw-platform">DNS Masking</a>.</li>
	<li>The path to players, <em>/players/</em>. Note the <a href="http://developer.longtailvideo.com/botr/#url-scheme">URL scheme</a> serves other stuff you can access too, like videos, thumbs and feeds.</li>
	<li>The <strong>key</strong> of the video you want to embed, <em>nPripu9l</em>. This is an 8 character string that can be found in the videos overview and details pages in the CMS. It can also be retrieved through the API, which is what we&#39;ll do in this tutorial.</li>
	<li>The <strong> key</strong> of the player you want to embed the video with, <em>ALJ3XQCI</em>. This is an 8 character string that can be found in the players overview and details pages in the CMS. It too can be retrieved through the API (see below).</li>
	<li>The extension of the player, <em>.js</em>. For preview pages (see below), this should be <em>.html</em>.</li>
</ul>

<p>Only the <strong>key</strong> and <strong>id</strong> part of the embed code change depending on the videos/players you embed. The other parts always remain the same. In order to get this dynamic data, we use two API calls:</p>

<ul>
	<li><a href="http://developer.jwplayer.com/jw-platform/reference/v1/methods/videos/list.html">/videos/list</a>: retrieves a list of videos from your account (including their <strong>key</strong>).</li>
	<li><a href="http://developer.jwplayer.com/jw-platform/reference/v1/methods/players/list.html">/players/list</a>: retrieves all players from your account (including their <strong>id</strong>).</li>
</ul>

<h2>Demo</h2>

<p>The script we&#39;re going to build in this tutorial mimicks the embed code form in the JW Platform dashboard. You can download this embed-code script as part of the <a href="http://support-static.jwplayer.com/API/php-api-examples-20151013.zip">PHP API Examples ZIP</a>.</p>

<p>First, as with any script, we include and initialize the API. Replace the <em>xxxx</em> and <em>yyyy</em> part with your account <strong>key</strong> and <strong>secret</strong>, which can be copy/pasted from the account page of the CMS.</p>

<pre>
require_once(&#39;botr/api.php&#39;);
$botr_api = new BotrAPI(&#39;xxxx&#39;,&#39;yyyyyyyy&#39;);
</pre>

<p>Second, we&#39;ll do the API calls to retrieve both the videos and players. Note that the <a href="http://developer.jwplayer.com/jw-platform/reference/v1/methods/videos/list.html">/videos/list</a> API call has options for filtering. The <a href="http://developer.jwplayer.com/jw-platform/reference/v1/methods/videos/list.html">/players/list</a> call is very bare bone.</p>

<pre>
$response1 = $botr_api-&gt;call(&quot;/videos/list&quot;);
$response2 = $botr_api-&gt;call(&quot;/players/list&quot;);</pre>

<p>Last, we construct the embed code. If any $_GET data is available (in other words: if the form has been submitted already), we use that player/video to build the code. If not, we use the first video and first player from the API call:</p>

<pre>
$video = (isset($_POST[&#39;video&#39;])) ? $_POST[&#39;video&#39;]: $response1[&#39;videos&#39;][0][&#39;key&#39;];
$player = (isset($_POST[&#39;player&#39;])) ? $_POST[&#39;player&#39;]: $response2[&#39;players&#39;][0][&#39;id&#39;];
$script = &#39;http://content.jwplatform.com/players/&#39;.$video.&#39;-&#39;.$player.&#39;.js&#39;;</pre>

<p>Once again note the full embed-code script can be downloaded as part of the <a href="http://support-static.jwplayer.com/API/php-api-examples.zip">PHP API Examples ZIP</a>.</p>

<h2>Next Steps</h2>

<p>There is a variety of ways in which this script can be extended. The most useful is likely to construct the link to a <a href="http://developer.jwplayer.com/jw-platform/reference/v1/urls/previews.html">simple preview page</a>. That can be done with the same variables.</p>

<p>As always, if you have questions or additional code you want to share, please <a href="/customer/portal/topics/635789-platform-api/questions">see our community questions</a>.</p>
