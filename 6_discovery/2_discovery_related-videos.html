<!-- This article is a combination of: 
https://support.jwplayer.com/customer/portal/articles/1483102-related-videos-with-jw-platform
and
https://support.jwplayer.com/customer/portal/articles/1409745-display-related-videos

NOTE: There is a Dashboard/Code tab structure that needs to be implemented here. Ask Shannon for help when you get to this. 

ALSO: This needs a Developer Site page to put some of the existing content on. 

FOR REVIEW BY: Franklin (Allison, Andrew?)

TITLE: "Related Videos"

KEYWORDS:
version:jw6, example:code, example:embed, related, feeds, recommendations, watch more, related videos, related overlay, jwAdvancedSetup, related plugin, 

--> 
<div class="article_toc">
<h2>Table Of Contents</h2>
<nav>
<ul>
	<li><a href="#about-related">About Related Videos</a></li>
    <li><a href="#how-are-related-videos-determined">How are they Determined?</a></li>
    <li><a href="#implementing-related">Implementing Related Videos</a></li>
	</ul>
</nav>
</div>
<p>This article provides an overview of JW Player's Related Videos plugin as well as instructions for implementation.</p>

<p>Surfacing videos that are relevant &amp; related to the current video being watched has been shown to increase viewer engagement and time spent per viewer. If you are a <strong>high-volume hosting &amp; streaming</strong> customer, be sure to check out this article about <a href="https://support.jwplayer.com/customer/en/portal/articles/2191721-data-driven-recommendations-beta">data-driven recommendations</a>.</p>
<a name="#about-related"></a>
<p>&nbsp;</p>
<h2>About Related Videos</h2>
<p>The JW Player Related Videos Overlay displays a customizable layer over the player that:
<ul>
<li>Displays a grid of video thumbnails &amp; titles (on hover) to the viewer<br>
<em>Generally, 6 videos fit in a 400x300 player, and 12 videos in a 600x400 player</em>.</li>
<li>Allows a viewer to click and watch another video</li>
<li>Enables related videos to be shown after a video ends </li>
<li>Allows for autoplay of the next related video</li>
</ul>
</p>
<p>End viewers can activate the overlay by clicking the Related Videos button. When the Related Videos plugin is enabled, this button appears at the top right of the player while a video is playing. The overlay also appears automatically after a video is done playing.</p>

<p>If the Related Videos Overlay is toggled on while the video is playing, playback is automatically paused. Users can then return to the video by clicking the top right "X", or anywhere else outside the overlay.</p>

<p>When a video in the Related Videos Overlay, it immediately starts playback in the same player. Meanwhile, Related Videos for that new video are fetched. This way, viewers can watch an endless stream of Related Videos without ever leaving the page.</p>

<p>As of <strong>JW Player 7.2.0</strong>, the related plugin includes additional functionality, such as the ability to autoplay related videos with a timer.</p>

<p>Here is the overlay in action:</p>

<div id="myElement">&nbsp;</div>
<script>
jwplayer("myElement").setup({
  displaytitle: false,
  height: 272,
  ph: 1,
  playlist: "http://content.jwplatform.com/jw6/YZGlPcgl.xml",
  plugins: {"http://assets-jpcust.jwpsrv.com/player/6/6124956/ping.js": {"pixel": "http://content.jwplatform.com/ping.gif"}},
  primary: "flash",
  related: {"oncomplete": true, "onclick": "play", "file": "http://content.jwplatform.com/related6/MEDIAID.xml"},
  width: 640,
stretching: 'uniform'
});
</script>

<a name="how-are-related-videos-determined"></a>
<p>&nbsp;</p>
<h2>How Are Related Videos Determined?</h2>
<p>While the overlay always works in the same way, the videos that populate it are determined differently depending on your embedding method.
<ul>
<li>If you are using <strong>custom embeds</strong> (with either cloud players or self-hosted players), Related Videos are determined by passing a Related Videos file into the embed. For more on this, jump to <a href="#code">code</a> implementation, below.</li>
<li>If you are using <strong>single-line embeds</strong> (cloud hosted player), Related Videos are determined using JW Player's <a href="https://support.jwplayer.com/customer/en/portal/articles/2191721">Data-Driven Recommendations</a> product.<br/>(<em><strong>Note:</strong> only users with <a href="https://www.jwplayer.com/pricing">high-volume hosting &amp; streaming</a> will have the option to turn on Related Videos</em>).</li>
</ul>
</p> 
<!-- <p>Related videos are sorted by most-recent first, and only the number of videos that fit in the overlay will be displayed. (Generally, 6 videos fit in a 400x300 player, and 12 videos in a 600x400 player).</p> <p>&nbsp;</p> -->
<a name="#implementing-related"></a>

<h2>Implementing Related Videos</h2>
<div class="tab-switch clearfix">
<ul class="tabs" data-options="scroll_to_content:false; deep_linking:true" data-tab="" role="tablist">
	<li class="tab-title active" role="presentation"><a aria-controls="dashboard" aria-selected="true" href="#dashboard" role="tab" tabindex="0">Dashboard</a></li>
	<li class="tab-title" role="presentation"><a aria-controls="code" aria-selected="false" href="#code" role="tab" tabindex="0">Code</a></li>
    </ul>
<div class="tabs-content">
<section aria-hidden="false" class="content active" id="dashboard" role="tabpanel">  
 
<p>Right now, Related Videos options in the dashboard are <strong>not displayed for every user</strong>. If you are interested in <a href="https://support.jwplayer.com/customer/en/portal/articles/2191721">Data-Driven Recommendations</a> and High-Volume Hosting &amp; Streaming, <a href="http://www.jwplayer.com/contact-us/" target="_blank">contact us</a>.</p>
<!--
<p>JW Player can automatically calculate which videos are related to one another based upon their <em>tags</em>. A piece of content is considered "Related" to another if it has <em>at least</em> 1 tag in common. All <a href="Content Metadata Article, Anchor to Tags">Click here</a> for more information on content metadata and tagging.</p>  -->
<p>For users who do <strong>not</strong> see the Related Videos option in the dashboard, and are not interested in <a href="https://support.jwplayer.com/customer/en/portal/articles/2191721">Data-Driven Recommendations</a> or High-Volume Hosting &amp; Streaming, you may still enable Related Videos by coding the plugin into the player setup. For instructions, skip to <a href="#code">code</a> setup in the next tab.</p>
<p>For users who <strong>do</strong> see it in the dashboard, the Related Videos overlay is "off" by default. It can be enabled on the Player Detail page, in the "Related" section.</p>
<p>You can also set the following options:
<ul>
<li>The title of the overlay shown to viewers (e.g. "Related Videos" or "More Videos Like This")</li>
<li>Behavior of the plugin when a video completes</li>
<li>Timer and custom text for "autoplay", if selected</li>
</ul>
</p>
<p><img src="//support-static.jwplayer.com/images/discovery/related-overlay-player-builder.png" alt="Related Controls in Player Builder"/>
</p>
<p><img src="//support-static.jwplayer.com/images/discovery/related-overlay-player-builder_2.png" alt="Related Overlay in Player Builder"/></p> 
<p>&nbsp;</p>
</section>
<section aria-hidden="true" class="content" id="code" role="tabpanel">
<p>The Related Videos functionality is activated by setting the Related configuration block. Inside this block, the following  parameters can be set (only "file" is required):
<ul>
  <li style="padding-bottom:16px;"><strong>file (required)</strong><br>
    The URL of an RSS or JSON file with related videos, e.g. http://example.com/related.json&nbsp;</li>
  <li style="padding-bottom:16px;"><strong>onclick</strong><br>
    Dictates the behavior when a related thumbnail is clicked. Can be set to:
    <ul>
      <li><strong>link (default) &mdash; </strong>Will redirect to another web page. (Based on the link field)</li>
      <li><strong>play &mdash;</strong> Will play a related video file inline. (Based on the file field)</li>
    </ul>
  </li>
  <li style="padding-bottom:16px;"><strong>oncomplete</strong><br>
    Configures the behavior of the related plugin when a single video, or playlist, completes.
    <ul>
      <li><strong>show (default) &mdash; </strong>Displays a list of related videos instead of a replay button. Setting <strong>true</strong> will map to this configuration option for legacy purposes.</li>
      <li><strong>hide &mdash; </strong>Displays a replay button with the related overlay collapsed. Setting <strong>false</strong> will map to this configuration option for legacy purposes.</li>
      <li><strong>autoplay &mdash; </strong>Will automatically begin the next related video after 10 seconds. If MEDIAID replacement is not used, autoplay will cycle through the feed much like a playlist.<br>
		<em><strong>Note:</strong> Setting autoplay will override onclick behavior to <strong>play</strong>.&nbsp;</em></li> 
        </ul>
  </li>
  <li style="padding-bottom:16px;"><strong>autoplaytimer</strong><br>
    The number of seconds to wait before playing the next related video in your content list. Defaults to 10, or set to 0 to have your next related content to play immediately.</li>
  <li style="padding-bottom:16px;"><strong>autoplaymessage</strong><br>
    A custom message that appears during autoplay. Uses xx as a replacement for the countdown timer.<br>
    A macro can also be used to replace aspects of the message, based on the next title included in the related feed with __title__.<br>
    So for example, using the following configuration:
    <pre>__title__ will play in xx seconds!  </pre>
    Will display as:<br>
    <strong>Awesome Movie Trailer will play in 10 seconds!</strong></li>
  <li style="padding-bottom:16px;"><strong>heading</strong><br>
    Single line heading displayed above the grid with related videos when clicked and as a tooltip when the related icon is moused over. The default value is Related Videos.</li>
</ul>
</p>

<h2>Example Setup</h2>

<p>Here is the setup of above example, setting the related videos file property and the link action. See the <a href="https://support.jwplayer.com/customer/en/portal/articles/1406723-basic-video-embed">Basic Video Embed page</a> for more info.</p>

<pre>
var playerInstance = jwplayer(&quot;container&quot;); 
playerInstance.setup({
file: &quot;/assets/tos.mp4&quot;,
related: {
file: &quot;/assets/tos-related.json&quot;,
onclick: &quot;link&quot;,
oncomplete: &#39;autoplay&#39;,
autoplaytimer: 10
}
});
</pre>


<!-- 
<h2>Related API</h2>
<p>Similar to our new Sharing refactor, our Related Plugin has received a brand new API. Similar to sharing, the related api examples below will assume that the following code is implemented:</p>
<pre>var relatedPlugin = jwplayer().getPlugin('related'); </pre>
<p><strong>As with all JW Player API calls, it is best practice to wait for on('ready'). This ensures that the player is completely set up and prepared to send/receive via its API.</strong></p>
<h3>Setters</h3>
<ul>
  <li><strong>relatedPlugin.open();</strong><br>
    Opens the related plugin overlay. This will pause content if it is currently playing.</li>
  <li><strong>relatedPlugin.close();</strong><br>
    Closes the related plugin overlay. This will resume content.</li>
</ul>
<h3>Listeners</h3>
<ul>
  <li><strong>relatedPlugin.on('open');</strong><br>
    Triggers when the related plugin is opened.<br>
    <strong>Returns:</strong>
    <ul>
      <li><strong>method - </strong>The method used to open the plugin. (api, complete, or click)</li>
      <li><strong>url - </strong>URL of the feed that was loaded into the player.</li>
      <li><strong>items - </strong>An array of all objects that have been loaded into the related plugin.</li>
    </ul>
  </li>
  <li><strong>relatedPlugin.on('close');</strong><br>
    Triggers when the related plugin is closed.<br>
    <strong>Returns:</strong>
    <ul>
      <li><strong>method - The method used to close the plugin. (api or click)</strong></li>
    </ul>
  </li>
  <li><strong>relatedPlugin.on('play');</strong><br>
    Triggers when a user selects an object in a related feed.<br>
    <strong>Returns:</strong>
    <ul>
      <li><strong>item - </strong>Metadata for the chosen item specified in the feed.</li>
      <li><strong>auto - </strong>Returns true if started via autoplay; false if manually started.</li>
      <li><strong>position - </strong>Ordinal position of the related video that has been chosen.</li>
    </ul>
  </li>
</ul>-->

<h2>Syndication</h2>

<h3>RSS</h3>

<p>The RSS feed used for loading Related Videos is the same type as the one used to load playlists. The element sets which page URL the player jumps to when a Related Video thumbnail is clicked. For more about the RSS file structure, check out our article on <a href="https://support.jwplayer.com/customer/portal/articles/1406722-rss-playlist-embed" target="_blank">external playlists and feeds</a>. </p>
<!--
<pre>
&lt;rss version=&quot;2.0&quot; xmlns:media=&quot;http://search.yahoo.com/mrss/&quot;&gt;
&lt;channel&gt;
&lt;item&gt;
&lt;title&gt;Big Buck Bunny&lt;/title&gt;
&lt;link&gt;http://example.com/watch/28839&lt;/link&gt;
&lt;media:thumbnail url=&quot;http://example.com/thumbs/28839.jpg&quot;/&gt;
&lt;media:content url=&quot;http://example.com/videos/28839.mp4&quot; type=&quot;video/mp4&quot; /&gt;
&lt;guid isPermalink=&quot;false&quot;&gt;28839&lt;/guid&gt;
&lt;/item&gt;
&lt;item&gt;
&lt;title&gt;Elephant&#39;s Dream&lt;/title&gt;
&lt;link&gt;http://example.com/watch/8791&lt;/link&gt;
&lt;media:thumbnail url=&quot;http://example.com/thumbs/8791.jpg&quot;/&gt;
&lt;media:content url=&quot;http://example.com/videos/8791.mp4&quot; type=&quot;video/mp4&quot; /&gt;
&lt;guid isPermalink=&quot;false&quot;&gt;8791&lt;/guid&gt;
&lt;/item&gt;
&lt;/channel&gt;
&lt;/rss&gt;
</pre>
-->
<p><strong>Note:</strong> RSS feeds are subject to cross-domain security restrictions and therefore won&#39;t automatically load from another domain than the player without providing server access. See <a href="https://support.jwplayer.com/customer/en/portal/articles/1403679-crossdomain-file-loading" target="_blank">Crossdomain File Loading</a> for more info.</p>
<!--
<p>If an item in the RSS feed does not contain the title and media:thumbnail elements, it is not displayed in the related videos overlay. If the onclick option is set to link, the link element is also required. If onclick is set to play, the media:content element is also required. If no items are found in the RSS feed, a No related videos found text is displayed instead of the grid of thumbnails.</p>
--> 

<h3>JSON</h3>

<p>As of JW Player 7.2.0, support for JSON feeds has also been added. For more about the JSON feed structure, check out our article on <a href="https://support.jwplayer.com/customer/portal/articles/1406722-rss-playlist-embed" target="_blank">external playlists and feeds</a></p>
<!--
Formatting for JSON feeds functions in the very same way as our standard JW Player playlists. The same information from our above RSS feeds would be formatted and used in a JSON file as follows:</p>

<pre>
[ 
{
&quot;title&quot;: &quot;Big Buck Bunny&quot;,
&quot;link&quot;: &quot;http://example.com/watch/28839&quot;,
&quot;image&quot;: &quot;http://example.com/thumbs/28839.jpg&quot;,
&quot;file&quot;: &quot;http://example.com/videos/28839.mp4&quot;,
&quot;mediaid&quot;: &quot;28839&quot;
},{
&quot;title&quot;: &quot;Elephant&#39;s Dream&quot;,
&quot;link&quot;: &quot;http://example.com/watch/8791&quot;,
&quot;image&quot;: &quot;http://example.com/thumbs/8791.jpg&quot;,
&quot;file&quot;: &quot;http://example.com/videos/8791.mp4&quot;,
&quot;mediaid&quot;: &quot;8791&quot;
}
]
</pre> -->

<p>&nbsp;</p>
<h2>Media ID Replacement</h2>

<p>The Media ID Replacement feature allows JW Player to dynamically construct URLs to related videos RSS feeds. <br>You may want to do this in either of two situations:
<ol>
<li>If you have a playlist with multiple videos and want to display related videos for each item.</li>
<li>If you set the onclick option to play and want to display related videos of related videos.</li>
</ol>
</p>

<p>Here is an example embed using a simple playlist with 2 items:</p>

<pre>
var playerInstance = jwplayer(&quot;container&quot;); 
playerInstance.setup({
    playlist: [{ 
       file: &quot;/videos/12345.mp4&quot;,
       mediaid: &quot;12345&quot;
    },{
       file: &quot;/videos/67890.mp4&quot;,
       mediaid: &quot;67890&quot;
    }],
    related: {
      file: &quot;/related/MEDIAID.json&quot;
   }
 });
</pre>
<p>In the above case, JW Player is able to replace the string <strong>MEDIAID</strong> with the actual <em>mediaid</em> for each video. So, for the first item in the playlist, JW Player will request the JSON feed /related/12345.json. For the second item, JW Player will request the feed /related/67890.json.</p>

<p>If the items in these additional JSON feeds also contain a mediaid (using the guid element), JW Player is able to in turn construct a related videos URL and display related videos of these related videos:</p>
<!--
<p>For more details about how to accomplish this, visit <a href="https://developer.jwplayer.com/jw-player/docs/developer-guide/api/javascript_api_reference/#related" target="_blank">this page</a> on the JW Player Developer site.</p>--> 

<!-- <h3>If you have a playlist with multiple videos and want to display related videos for each item.</h3>

<p>If you set the onclick option to play and want to display related videos of related videos.<br />
Here is an example embed using a simple playlist with 2 items:</p>

<pre>
var playerInstance = jwplayer(&quot;container&quot;); 
playerInstance.setup({
    playlist: [{ 
       file: &quot;/videos/12345.mp4&quot;,
       mediaid: &quot;12345&quot;
    },{
       file: &quot;/videos/67890.mp4&quot;,
       mediaid: &quot;67890&quot;
    }],
    related: {
      file: &quot;/related/MEDIAID.json&quot;
   }
 });
</pre>

<p>For the first item in the playlist, JW Player will request the JSON feed /related/12345.json. For the second item, JW Player will request the feed /related/67890.json.</p>

<p>If the items in these JSON feeds also contain a mediaid (using the guid element), JW Player is able to in turn construct a related videos URL and display related videos of these related videos:</p>

<pre>
[
{
&quot;title&quot;: &quot;Big Buck Bunny&quot;,
&quot;link&quot;: &quot;http://example.com/watch/28839&quot;,
&quot;image&quot;: &quot;http://example.com/thumbs/28839.jpg&quot;,
&quot;file&quot;: &quot;http://example.com/videos/28839.mp4&quot;
&quot;mediaid&quot;: &quot;28839&quot;
},{
&quot;title&quot;: &quot;Elephant&#39;s Dream&quot;,
&quot;link&quot;: &quot;http://example.com/watch/8791&quot;,
&quot;image&quot;: &quot;http://example.com/thumbs/8791.jpg&quot;,
&quot;file&quot;: &quot;http://example.com/8791.mp4&quot;,
&quot;mediaid&quot;: &quot;8791&quot;
}
]
</pre>
--> 

<p>&nbsp;</p>
<h2>Related Videos API</h2>

<p>We've also added API controls to our Related Videos plugin. To learn about the calls and how to use them, head on over to the Related Videos plugin documentation on the <a href="https://developer.jwplayer.com/jw-player/docs/developer-guide/api/javascript_api_reference/#related" target="_blank">JW Player Developer Portal</a>.
</p>
</section>
</div>
</div>
